webpackJsonp([31],{NnVd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("0qgA"),i=(a("w3CS"),{name:"noTifyManagerform",components:{formFile:a("gnUw").a},props:{formId:{type:String,default:""},readOnly:{type:Boolean,default:!1}},data:function(){return{onotifyRead:[],option:{name:"我的通告",apiName:"oa",labelWidth:"150px",callback:{},initObject:{id:this.formId,pageNo:1,pageSize:10},hasPermission:{save:{isShow:!this.readOnly,isPermission:!0},back:{isShow:!0,isPermission:!0}},formObject:{},columns:[{label:"标题",value:"title",type:"input",columnOffset:{col:18,offset:3},disHid:!1,disabled:this.readOnly,rule:[{required:!0,message:"任务名称不能为空",trigger:"blur"},{min:0,max:64,message:"任务名称长度必须介于 0 到 64 之间",trigger:"blur"}]},{label:"类型",value:"type",type:"select",columnOffset:{col:18,offset:3},dict:{dictType:"oa_notify_type",dictData:[]},disHid:!1,disabled:this.readOnly,rule:[{required:!0,message:"任务分组不能为空",trigger:"blur"},{min:0,max:64,message:"任务分组长度介于 0 到 64 之间",trigger:"blur"}]},{label:"内容",value:"content",type:"textarea",columnOffset:{col:18,offset:3},disHid:!1,disabled:this.readOnly,rule:[{required:!0,message:"cron表达式不能为空",trigger:"blur"},{min:0,max:64,message:"cron表达式长度必须介于 0 到 64 之间",trigger:"blur"}]},{label:"接收人",value:"oaNotifyRecordList",type:"slot",slotName:"oaNotifyRecordList"}],formChildInfo:[]}}},created:function(){var e=this;this.$store.dispatch("dict_getDictListByType","oa_notify_read").then(function(){e.onotifyRead=e.$store.state.dict.dictListType})},mounted:function(){var e=this;setTimeout(function(){e.$store.dispatch("navbar_GetCount")},500)},methods:{goBack:function(){this.$emit("goBack")}}}),n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form-file",{attrs:{option:e.option},on:{goBack:e.goBack},scopedSlots:e._u([{key:"oaNotifyRecordList",fn:function(t){var o=t.slotValue;return e.readOnly?[a("el-col",{attrs:{span:18,offset:3}},[a("el-form-item",{attrs:{label:"接收人:"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.option.formObject[o],border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"userName",label:"接收人",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"officeName",label:"接收部门",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"readFlag",label:"阅读状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.onotifyRead,function(o,i){return a("span",{key:i},[o.value===t.row.readFlag?a("span",[e._v(e._s(o.label))]):e._e()])})}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"readDate",label:"阅读时间",width:""}})],1)],1)],1)]:void 0}}],null,!0)})},staticRenderFns:[]},l=a("C7Lr")(i,n,!1,null,null,null).exports,s=a("ANQr"),r={name:"oaNotifyList",components:{quickTable:o.a,quickForm:l,baseButton:s.a},data:function(){return{readOnly:!0,option:{selection:!1,showIndex:!0,tableMenu:!0,isPage:!0,name:"我的通告",apiName:"oa",activeName:"oa",formId:"",searchObject:{type:"",self:!0,title:"",pageNo:1,pageSize:15},hasPermission:{edit:{isShow:!1,isPermission:!0},del:{isShow:!1,isPermission:!0}},columns:[{label:"标题",prop:"title"},{label:"类型",prop:"type",dict:{dictType:"oa_notify_type",dictData:[]}},{label:"状态",prop:"status",dict:{dictType:"oa_notify_status",dictData:[],tags:[{label:"success",value:"1"},{label:"warning",value:"0"}]}},{label:"查阅状态",prop:"readFlag",dict:{dictType:"oa_notify_read",dictData:[],tags:[{label:"success",value:"1"},{label:"danger",value:"0"}]},isTag:!0}],searchColums:[{label:"类型",value:"type",type:"select",dict:{dictType:"oa_notify_type",dictData:[]}},{label:"标题",value:"title",type:"input"}]}}},created:function(){},methods:{goBack:function(){this.option.formId="",this.option.activeName="oa",this.$refs.quickTable.getList()},oaform:function(e){this.option.formId=e.id,this.option.activeName="oaNotifyform"},onSubmit:function(){this.$refs.quickTable.getList()},handleClick:function(e,t){"oa"==e.name&&this.onSubmit()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.option.activeName,callback:function(t){e.$set(e.option,"activeName",t)},expression:"option.activeName"}},[a("el-tab-pane",{attrs:{label:"我的通告",name:"oa"}},[a("quick-table",{ref:"quickTable",attrs:{option:e.option},scopedSlots:e._u([{key:"menu",fn:function(t){var o=t.row;return[a("base-button",{attrs:{type:"success",icon:"el-icon-search",size:"mini",content:"查看"},on:{buttonEvent:function(t){return e.oaform(o)}}})]}}])})],1),e._v(" "),"oaNotifyform"==e.option.activeName?a("el-tab-pane",{attrs:{label:"通告查看",name:"oaNotifyform"}},["oaNotifyform"==e.option.activeName?a("quick-form",{attrs:{formId:e.option.formId,readOnly:e.readOnly},on:{goBack:e.goBack}}):e._e()],1):e._e()],1)],1)])},staticRenderFns:[]},u=a("C7Lr")(r,c,!1,null,null,null);t.default=u.exports}});