webpackJsonp([16],{WlSA:function(e,t){},eoqP:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("0qgA"),a={name:"quickIframe",data:function(){return{}},mounted:function(){this.iframeInit()},props:{src:{type:String,required:!0}},methods:{iframeInit:function(){var e=this.$refs.iframe,t=document.documentElement.clientHeight-180;e.style.height=t+"px"}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("iframe",{ref:"iframe",staticClass:"iframe",attrs:{src:this.src}})])},staticRenderFns:[]};var r={name:"modeldetail",components:{quickIframe:i("C7Lr")(a,o,!1,function(e){i("WlSA")},null,null).exports},props:{id:{type:String,required:!0}},data:function(){return{activeName:"modelDetail",iframeSrc:""}},created:function(){this.id?this.iframeSrc=window.location.origin+"mcws/modeler.html?modelId="+this.id:this.init()},methods:{init:function(){var e=this;this.$store.dispatch("model_add").then(function(t){t&&"200"==t.code?e.iframeSrc=window.location.origin+"mcws/modeler.html?modelId="+t.data.id:e.$message({message:t.message||"获取失败",showClose:!0,type:"error",duration:3e3})})}}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-container"},[t("quickIframe",{attrs:{src:this.iframeSrc}})],1)},staticRenderFns:[]},s=i("C7Lr")(r,l,!1,null,null,null).exports,c=i("ANQr"),d={name:"modelList",components:{quickTable:n.a,modeldetail:s,baseButton:c.a},data:function(){var e=this;return{activeName:"modelManag",modeldetailId:"",dropdown:function(t){var i=e;return[{content:"部署",callback:function(){i.oaform(t)}},{content:"模型图",callback:function(){i.modelDetail(t)}},{content:"导出",callback:function(){i.exporT(t)}}]},option:{selection:!1,showIndex:!0,tableMenu:!0,isPage:!0,name:"模型",apiName:"model",searchObject:{pageNo:1,pageSize:15},hasPermission:{edit:{isShow:!0,isPermission:!1},del:{isShow:!0,isPermission:!0}},columns:[{label:"模型ID",prop:"id",width:200},{label:"模型标识",prop:"key"},{label:"模型名称",prop:"name"},{label:"版本号",prop:"version",width:100},{label:"创建时间",prop:"createTime"},{label:"最后更新时间",prop:"lastUpdateTime"}]}}},computed:{formLabel:function(){return this.modeldetailId?"模型图编辑":"模型图添加"}},methods:{modelDetail:function(e){this.modeldetailId=e.id,this.activeName="modeldetail"},oaform:function(e){var t=this;this.$confirm("您确定要部署该模型吗？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("modelMan_deploy",e.id).then(function(){t.$refs.quickTable.getList()})}).catch(function(){})},exporT:function(e){""!==e.id&&void 0!==e.id?window.open("mcws/act/model/export?id="+e.id,"_self"):this.$message({message:"没有附件可以下载",type:"warning"})},handleClick:function(e,t){"modelManag"==e.name&&(this.modeldetailId=""),this.$refs.quickTable.getList()}}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{},[i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"模型管理列表",name:"modelManag"}},[i("quick-table",{ref:"quickTable",attrs:{option:e.option},scopedSlots:e._u([{key:"menuTop",fn:function(t){var n=t.row;return[i("base-button",{attrs:{type:"primary",icon:"el-icon-arrow-down el-icon--right",size:"mini",content:"更多",dropdown:e.dropdown(n)}})]}}])})],1),e._v(" "),i("el-tab-pane",{attrs:{label:e.formLabel,name:"modeldetail"}},["modeldetail"==e.activeName?i("modeldetail",{attrs:{id:e.modeldetailId}}):e._e()],1)],1)],1)])},staticRenderFns:[]},u=i("C7Lr")(d,m,!1,null,null,null);t.default=u.exports}});