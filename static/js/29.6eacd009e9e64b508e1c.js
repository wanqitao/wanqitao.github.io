webpackJsonp([29],{"4vam":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("c/w/"),l=a("0qgA"),r=a("w3CS"),s=a("BD2p"),o={name:"regulateRulesform",components:{formFile:a("gnUw").a,upload:s.a},props:{formId:{type:String,default:""}},computed:{},data:function(){var e=this;return{defaultProps:{id:"id",children:"children",label:"name"},treeData:[],option:{name:"审批规则",apiName:"regulateRules",labelWidth:"150px",callback:{},initObject:{id:this.formId},hasPermission:{save:{isShow:!0,isPermission:!0},back:{isShow:!0,isPermission:!0}},formObject:{auditRules:[]},columns:[{label:"审批规则名称",value:"ruleName",maxlength:10,type:"input",disHid:!1,disabled:!1,columnOffset:{},rule:[{required:!0,message:"审批规则名称不能为空",trigger:"blur"},{validator:r.e({validateMethod:"office_checkNameCode",name:"部门名称",keyField:"name",fileId:this.formId}),trigger:"blur"}]},{label:"审批规则标识",value:"ruleSign",type:"input",disHid:!1,disabled:!1,columnOffset:{},rule:[{required:!0,message:"审批规则标识不能为空",trigger:"blur"},{validator:r.e({validateMethod:"office_checkNameCode",name:"部门编码",keyField:"code",fileId:this.formId}),trigger:"blur"}]},{label:"审批规则状态",value:"ruleStatus",type:"select",callback:function(e){console.log(e)},columnOffset:{},dict:{dictType:"audit_rule_status",dictData:[]},disHid:!1,disabled:!1},{label:"应用说明",value:"remarks",type:"textarea",maxlength:200,columnOffset:{},disHid:!1,disabled:!1,rule:[{min:0,max:64,message:"描述必须介于 0 到 64 之间",trigger:"blur"}]}],formChildInfo:[{childTitle:"审批规则",childEnName:"auditRule",dialogField:!1,dialogTitle:"规则明细",indexField:0,delInterface:{useInt:!1,delMethod:"",delObject:{}},childObject:{auditUserId:"",auditUserName:"",auditUserOfficeName:"",applyUserIds:"",applyUserNames:""},childArray:[{label:"审批人",value:"auditUserId",name:"auditUserName",type:"tree",callback:function(t,a,i){a.tree.isMultiple?(e.$set(i.childObject,a.name,e.arrayToString(t,a.tree.defaultProps.label)),e.$set(i.childObject,a.value,e.arrayToString(t,a.tree.defaultProps.id)),e.$set(i.childObject,"auditUserOfficeName",e.arrayToString(t,"officeName"))):(e.$set(i.childObject,a.name,t[a.tree.defaultProps.label]),e.$set(i.childObject,a.value,t[a.tree.defaultProps.id]),e.$set(i.childObject,"auditUserOfficeName",t.officeName))},tree:{filter:{isFilter:!0},isMultiple:!1,defaultProps:{id:"id",children:"children",label:"name"},treeMethod:"office_getOfficeUserTree",treeObject:{isUser:!0},treeData:[]}},{label:"审批部门",value:"auditUserOfficeName",disHid:!1,disabled:!0,type:"input"},{label:"申请人",value:"applyUserIds",name:"applyUserNames",type:"tree",tree:{isMultiple:!0,defaultProps:{id:"id",children:"children",label:"name"},filter:{isFilter:!0},treeMethod:"office_getOfficeUserTree",treeObject:{isUser:!0},treeData:[]}}]}]}}},created:function(){},methods:{goBack:function(){this.$emit("goBack")}}},n={render:function(){var e=this.$createElement;return(this._self._c||e)("form-file",{attrs:{option:this.option},on:{goBack:this.goBack}})},staticRenderFns:[]},d=a("C7Lr")(o,n,!1,null,null,null).exports,u={name:"regulateRulesList",components:{tree:i.a,quickTable:l.a,quickForm:d},data:function(){return{option:{selection:!1,showIndex:!0,tableMenu:!0,isPage:!0,name:"审批规则",apiName:"regulateRules",activeName:"regulateRules",formId:"",searchObject:{ruleName:"",ruleStatus:"",pageNo:1,pageSize:15},hasPermission:{edit:{isShow:!0,isPermission:!0},del:{isShow:!0,isPermission:!0,isMultDel:!1,delMethod:"",delObject:{}}},columns:[{label:"审批规则名称",prop:"ruleName"},{label:"审批规则状态",prop:"ruleStatus",dict:{dictType:"audit_rule_status",dictData:[]}},{label:"审批规则标识",prop:"ruleSign"},{label:"应用说明",prop:"remarks"},{label:"创建时间",prop:"createDate"},{label:"修改时间",prop:"updateDate"}],searchColums:[{label:"审批规则名称",value:"ruleName",type:"input"},{label:"审批日期",value:"date",type:"datetimerange",pickerOptions:{identifier:"custom",callback:function(e){var t=(new Date).getTime()-7776e6;return e.getTime()>Date.now()||e.getTime()<t}}},{label:"审批开始日期",value:"startTime",type:"daterange",pickerOptions:{identifier:"NowAndAfter",callback:function(e){var t=(new Date).getTime()-7776e6;return e.getTime()>Date.now()||e.getTime()<t}}},{label:"审批规则状态",value:"ruleStatus",type:"select",dict:{dictType:"audit_rule_status",dictData:[]}}]}}},created:function(){},methods:{goBack:function(){this.option.formId="",this.option.activeName="regulateRules",this.$refs.quickTable.getList()},handleClick:function(e,t){"regulateRules"==e.name&&(this.option.formId="")}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.option.activeName,callback:function(t){e.$set(e.option,"activeName",t)},expression:"option.activeName"}},[a("el-tab-pane",{attrs:{label:"审批规则列表",name:"regulateRules"}},[a("quick-table",{ref:"quickTable",attrs:{option:e.option}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:""==e.option.formId?"审批规则添加":"审批规则编辑",name:"regulateRulesform"}},["regulateRulesform"==e.option.activeName?a("quick-form",{attrs:{formId:e.option.formId},on:{goBack:e.goBack}}):e._e()],1)],1)],1)])},staticRenderFns:[]},m=a("C7Lr")(u,c,!1,null,null,null);t.default=m.exports}});