webpackJsonp([25],{CqIZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("0qgA"),r=a("gnUw"),o=a("w3CS"),l={components:{quickForm:r.a},props:{formId:{type:String,default:""},readOnly:{type:Boolean,default:!1}},created:function(){},computed:{},data:function(){var e=this;return{option:{name:"业务协议",apiName:"protocol",labelWidth:"120px",initObject:{id:this.formId},callback:{},hasPermission:{save:{isShow:!this.readOnly,isPermission:!0},back:{isShow:"true",isPermission:!0}},columns:[{label:"业务名称",value:"name",type:"input",disHid:!1,disabled:this.readOnly,rule:[{required:!0,message:"业务名称不能为空",trigger:"blur"},{min:0,max:64,message:"业务名称长度必须介于 0 到 64 之间",trigger:"blur"},{validator:o.e({validateMethod:"protocol_validateName",name:"业务名称",keyField:"name",fileId:this.formId}),trigger:"blur"}]},{label:"业务类型",value:"workType",type:"checkbox",disHid:!1,disabled:this.readOnly,rule:[{required:!0,message:"业务类型不能为空",trigger:"change"}],data:{dataList:e.$store.dispatch("dict_getDictListByType","protocol_workType").then(function(t){return function(e){return e}(e.$store.state.dict.dictListType)})}},{label:"单位名称",value:"companyId",name:"companyName",type:"tree",disHid:!1,disabled:this.readOnly,callback:function(t,a,i){e.option.formObject.companyName=t.name,e.option.formObject.companyId=t.id,e.option.formObject.companyContactName=t.contactId,e.option.formObject.tel=t.tel,e.option.formObject.mobile=t.mobile},rule:[{required:!0,message:"单位名称不能为空",trigger:"change"}],tree:{defaultProps:{id:"id",children:"children",label:"name"},treeMethod:"access_getCompanyTree",treeObject:{},treeData:[]}},{label:"单位联系人",value:"companyContactName",type:"input",placeholder:"自动带出",disHid:!1,disabled:!0,rule:[{required:!0,message:"单位联系人不能为空",trigger:"blur"},{min:0,max:64,message:"单位联系人长度必须介于 0 到 64 之间",trigger:"blur"}]},{label:"联系电话",value:"tel",disHid:!1,disabled:!0,placeholder:"自动带出",type:"input"},{label:"手机号码",value:"mobile",disHid:!1,disabled:!0,placeholder:"自动带出",type:"input"},{label:"业务概述",value:"workSummary",type:"textarea",disHid:!1,disabled:this.readOnly,rule:[{required:!0,message:"业务概述不能为空",trigger:"blur"},{min:0,max:500,message:"业务概述长度必须介于 0 到 500 之间",trigger:"blur"}]},{label:"合同开始时间",value:"beginDate",type:"datetime",disHid:!1,disabled:this.readOnly,rule:[{required:!0,message:"合同开始时间不能为空",trigger:"change"}]},{label:"合同结束时间",value:"endDate",type:"datetime",disHid:!1,disabled:this.readOnly,rule:[{required:!0,message:"合同结束时间不能为空",trigger:"change"},{validator:function(t,a,i){(new Date(a)-new Date(e.option.formObject.beginDate))/864e5<=0?i(new Error("合同结束时间必需大于合同开始时间")):i()},trigger:"blur"}]},{label:"合同金额(元)",value:"amount",type:"number",disHid:!1,disabled:this.readOnly,rule:[{required:!0,message:"合同金额不能为空",trigger:"blur"},{validator:o.b({self:this,precision:2,name:"合同金额",keyField:"option.formObject.amount"}),trigger:"blur"}]},{label:"业务责任人",value:"workLiableId",name:"workLiableName",type:"tree",disHid:!1,disabled:this.readOnly,rule:[{required:!0,message:"业务责任人不能为空",trigger:"change"}],tree:{defaultProps:{id:"id",children:"children",label:"name"},filter:{isFilter:!0},treeMethod:"office_getOfficeUserTree",treeObject:{isUser:!0},treeData:[]}},{label:"技术责任人",value:"technicalLiablrId",name:"technicalLiableName",type:"tree",disHid:!1,disabled:this.readOnly,rule:[{required:!0,message:"技术责任人不能为空",trigger:"change"}],tree:{defaultProps:{id:"id",children:"children",label:"name"},filter:{isFilter:!0},treeMethod:"office_getOfficeUserTree",treeObject:{isUser:!0},treeData:[]}},{label:"合同扫描件",value:"contractUrl",type:"upload",rule:[{required:!1,message:"合同扫描件不能为空",trigger:"change"}],disHid:!1,disabled:this.readOnly}],assistParams:{workType:"ArrayString"},formObject:{workType:[]},formChildInfo:[]}}},methods:{goBack:function(){this.$emit("goBack")}}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"protocolform"},[t("quick-form",{attrs:{option:this.option},on:{goBack:this.goBack}})],1)},staticRenderFns:[]},s=a("C7Lr")(l,n,!1,null,null,null).exports,d={name:"protocolList",components:{quickTable:i.a,quickForm:s},data:function(){return{option:{selection:!1,showIndex:!0,tableMenu:!1,isPage:!0,activeName:"protocol",formId:"",name:"业务协议",readOnly:!1,apiName:"protocol",hasPermission:{edit:{isShow:"true",flag:"businessProtocol:edit",isPermission:!1},del:{isShow:"true",flag:"businessProtocol:remove",isPermission:!0}},columns:[{label:"业务名称",prop:"name"},{label:"业务类型",prop:"workType",dict:{dictType:"protocol_workType",dictData:[]}},{label:"单位名称",prop:"companyName"},{label:"单位联系人",prop:"companyContactName"},{label:"合同金额(元)",isMoney:!0,prop:"amount"}],searchObject:{pageNo:1,pageSize:15},searchColums:[{label:"业务名称",value:"name",type:"input"},{label:"业务类型",value:"workType",type:"select",dict:{dictType:"protocol_workType",dictData:[]}},{label:"单位名称",value:"companyId",type:"tree",tree:{defaultProps:{id:"id",children:"children",label:"name"},treeMethod:"access_getCompanyTree",treeObject:{},treeData:[]}}]}}},created:function(){},computed:{formLabel:function(){return this.option.formId?this.option.readOnly?"业务协议查看":"业务协议编辑":"业务协议添加"}},methods:{goBack:function(){this.option.formId="",this.option.activeName="protocol",this.option.readOnly=!1,this.$refs.quickTable.getList()},handleClick:function(e,t){"protocol"==e.name&&(this.option.formId="",this.option.readOnly=!1,this.$refs.quickTable.getList())}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.option.activeName,callback:function(t){e.$set(e.option,"activeName",t)},expression:"option.activeName"}},[a("el-tab-pane",{attrs:{label:"业务协议列表",name:"protocol"}},[a("quick-table",{ref:"quickTable",attrs:{option:e.option}})],1),e._v(" "),e.option.readOnly||e.option.hasPermission.edit.isPermission?a("el-tab-pane",{attrs:{label:e.formLabel,name:"protocolform"}},["protocolform"==e.option.activeName?a("quick-form",{attrs:{formId:e.option.formId,readOnly:e.option.readOnly},on:{goBack:e.goBack}}):e._e()],1):e._e()],1)],1)])},staticRenderFns:[]},m=a("C7Lr")(d,c,!1,null,null,null);t.default=m.exports}});